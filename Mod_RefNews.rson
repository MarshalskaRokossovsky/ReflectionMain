{
    "FileID": 573785173,
    "FileVersion": 8,
    "ViewPos.x": -16,
    "ViewPos.y": -85,
    "ScriptName": "mod_RefNews",
    "ScriptFileOut": "C:\\Users\\DmitB\\Documents\\Фиксы\\Reflection Fixes\\Mods\\Reflection\\RefNews\\DATA\\Script\\mod_RefNews.scr",
    "ScriptTextOut": "C:\\Users\\DmitB\\Documents\\Фиксы\\Reflection Fixes\\Mods\\Reflection\\RefNews\\DATA\\Script\\mod_RefNews.txt",
    "LangDatIn": "",
    "LangDatOut": "",
    "MainDatIn": "",
    "MainDatOut": "",
    "CacheDatIn": "",
    "CacheDatOut": "",
    "ExportLangTxt": false,
    "ExportLangDat": false,
    "Visual.Objects": 
    [
        {
            "Groups": 
            [
                {
                    "Type": "TGroup",
                    "Name": "PlayerGroup",
                    "Pos.x": 100,
                    "Pos.y": 210,
                    "Parent": -1,
                    "#": 4,
                    "Owner": 62,
                    "Group.Type": 126,
                    "CntShipMin": 1,
                    "CntShipMax": 1,
                    "SpeedMin": 100,
                    "SpeedMax": 10000,
                    "Weapon": 0,
                    "CargoHook": 0,
                    "EmptySpace": 0,
                    "AddPlayer": true,
                    "StatusTraderMin": 0,
                    "StatusTraderMax": 100,
                    "StatusWarriorMin": 0,
                    "StatusWarriorMax": 100,
                    "StatusPirateMin": 0,
                    "StatusPirateMax": 100,
                    "DistSearch": 10000,
                    "Dialog": -1,
                    "StrengthMin": "0",
                    "StrengthMax": "0",
                    "Ruins": ""
                }
            ],
            "Operations": 
            [
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 240,
                    "Pos.y": 170,
                    "Parent": -1,
                    "#": 5,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Обновляем при необходимости массив новостей",
                        "if(Version != CT('AdditionalNews.RegularNewsVersion')) {",
                        "    j = ArrayDim(timerNew);",
                        "    timerNew = newarray(CT('AdditionalNews.RegularNewsCount'));",
                        "    CT('AdditionalNews.blacklistNews',blacklistNew);",
                        "    ",
                        "    for (i = j; i < ArrayDim(timerNew); i = i + 1) timerNew[i] = 0;",
                        "    Version = CT('AdditionalNews.RegularNewsVersion');",
                        "}",
                        "",
                        "",
                        "if(NewsTimer != 0) NewsTimer = NewsTimer - 1; //каждый ход таймер уменьшается на 1",
                        "StarChoosed = 0;",
                        "StarChoosed1 = 0;",
                        "PlanetChoosed = 0; // очистка переменных с именами планет и звёзд",
                        "PlanetChoosed1 = 0;",
                        "PlanetChoosed2 = 0;",
                        "for(i=0;i<=CT('AdditionalNews.RegularNewsCount');i=i+1) { //чтобы не писать каждый элемент массива, отнимаем 1 от КД циклично",
                        "    for(j=0;ArrayDim(blacklistNew)>j;j=j+1) {",
                        "        if(i == blacklistNew[j]) continue;",
                        "    }",
                        "",
                        "    /*if(!((i == blacklist[1])||(i == blacklist[2])||(i == blacklist[3])||(i == blacklist[4])||(i == blacklist[5])||(i == blacklist[6])||(i == blacklist[7])))",
                        "    {",
                        "        timer[i] = timer[i] - 1;",
                        "    }*/",
                        "    //отнимаем по единице кулдауна у всех новостей",
                        "}",
                        "if(NewsTimer <= 0) //если закончился кулдаун новостей (сделан, чтобы не спамить игроку в хлебало новостями",
                        "{",
                        "    while(nope == 0) {",
                        "        ForRandom = Rnd(1,CT('AdditionalNews.RegularNewsCount'));",
                        "        TryAgain = 0;",
                        "        while(timerNew[ForRandom] > 0) // проверяем завершение кулдауна для этой новости",
                        "        {",
                        "            ForRandom = Rnd(1,CT('AdditionalNews.RegularNewsCount'));",
                        "            TryAgain = TryAgain + 1;",
                        "            if (TryAgain > 1200)",
                        "            {",
                        "                ForRandom = 0; //если совсем уж не попалось никаких новостей, публикуем специальную нулевую новость",
                        "                break;",
                        "            }",
                        "            if(timerNew[ForRandom] != 0) continue;",
                        "        }",
                        "        j = GalaxyStars();",
                        "        cur_star = GalaxyStar(Rnd(0,j-1)); //выбираем рандомную звёздов",
                        "        while(StarChoosed == 0) {",
                        "            cur_star = GalaxyStar(Rnd(0,j-1)); //выбираем рандомную звёздов",
                        "            //if(TryAgain>15) SFT('раунд первый - звезда '+Name(cur_star));",
                        "            TryAgain = TryAgain + 1;",
                        "            if(TryAgain==200) break; // на случай зацикливания",
                        "            if(StarOwner(cur_star)>0) continue; //Исключаем некоалиционные системы и системы с кастомной расой",
                        "            if(StarCustomFaction(cur_star)!='') continue;",
                        "            if(StarToCon(cur_star)==StarToCon(PlanetToStar(PlanetPirateClan()))) continue; //Исключаем Тортугац и Нифигац на всякий случай",
                        "            StarChoosed = cur_star;",
                        "        }",
                        "        while(StarChoosed1 == 0) {",
                        "            cur_star = GalaxyStar(Rnd(0,j-1)); //выбираем рандомную звёздов",
                        "            //if(TryAgain>15) SFT('раунд второй - звезда '+Name(cur_star));",
                        "            TryAgain = TryAgain + 1;",
                        "            if(TryAgain==400) break; // на случай зацикливания",
                        "            if(StarOwner(cur_star)>0) continue; //Исключаем некоалиционные системы и системы с кастомной расой",
                        "            if(StarCustomFaction(cur_star)!='') continue;",
                        "            if(StarToCon(cur_star)==StarToCon(PlanetToStar(PlanetPirateClan()))) continue; //Исключаем Тортугац и Нифигац на всякий случай",
                        "            if(StarChoosed==cur_star) continue; //если звезда уже выбрана - ищем звёздов заново",
                        "            StarChoosed1 = cur_star;",
                        "        }",
                        "        while(PlanetChoosed == 0) {",
                        "            cur_star = GalaxyStar(Rnd(0,j-1)); //выбираем рандомную звёздов",
                        "            //if(TryAgain>15) SFT('раунд третий - звезда '+Name(cur_star));",
                        "            TryAgain = TryAgain + 1;",
                        "            if(TryAgain==700) break; // на случай зацикливания",
                        "            if(StarOwner(cur_star)>0) continue; //Исключаем некоалиционные системы и системы с кастомной расой",
                        "            if(StarCustomFaction(cur_star)!='') continue;",
                        "            if(StarToCon(cur_star)==StarToCon(PlanetToStar(PlanetPirateClan()))) continue; //Исключаем Тортугац и Нифигац на всякий случай",
                        "            i = StarPlanets(cur_star);",
                        "            cur_planet = StarPlanets(cur_star,Rnd(0,i-1));",
                        "            while(PlanetOwner(cur_planet)==6) {",
                        "                cur_planet = StarPlanets(cur_star,Rnd(0,i-1));",
                        "                TryAgainPlanets = TryAgainPlanets+1;",
                        "                if(TryAgainPlanets==30) break; //если перебрали всё, а не нашли заселёнок",
                        "            }",
                        "            if(TryAgainPlanets==30) continue;",
                        "            if(ForRandom == 88 || ForRandom == 102 || ForRandom == 108) {",
                        "                if(PlanetGov(cur_planet) < 4) continue; //некоторые новости мною запилены под социалистический стиль; там применяется только одна планета, поэтому и условие только для первой планеты, и только если номер новости совпадает.",
                        "            }",
                        "            if(ForRandom == 103) {",
                        "                if(PlanetGov(cur_planet) > 0) continue; //некоторые новости мною запилены под социалистический стиль; там применяется только одна планета, поэтому и условие только для первой планеты, и только если номер новости совпадает.",
                        "            }",
                        "            PlanetChoosed = cur_planet;",
                        "        }",
                        "        while(PlanetChoosed1 == 0) {",
                        "            cur_star = GalaxyStar(Rnd(0,j-1)); //выбираем рандомную звёздов",
                        "            //if(TryAgain>15) SFT('раунд четвёртый - звезда '+Name(cur_star));",
                        "            TryAgain = TryAgain + 1;",
                        "            if(TryAgain==1000) break;",
                        "            if(StarOwner(cur_star)>0) continue; //Исключаем некоалиционные системы и системы с кастомной расой",
                        "            if(StarCustomFaction(cur_star)!='') continue;",
                        "            if(StarToCon(cur_star)==StarToCon(PlanetToStar(PlanetPirateClan()))) continue; //Исключаем Тортугац и Нифигац на всякий случай",
                        "            i = StarPlanets(cur_star);",
                        "            cur_planet = StarPlanets(cur_star,Rnd(0,i-1));",
                        "            while(PlanetOwner(cur_planet)==6) {",
                        "                cur_planet = StarPlanets(cur_star,Rnd(0,i-1));",
                        "                TryAgainPlanets = TryAgainPlanets+1;",
                        "                if(TryAgainPlanets==30) break;",
                        "            }",
                        "            if(TryAgainPlanets==30) continue;",
                        "            if(PlanetChoosed==cur_planet) continue; // если уже выбрали эту планету - ищем заново",
                        "            PlanetChoosed1 = cur_planet;",
                        "        }",
                        "        while(PlanetChoosed2 == 0) {",
                        "            cur_star = GalaxyStar(Rnd(0,j-1)); //выбираем рандомную звёздов",
                        "            //if(TryAgain>15) SFT('раунд пятый - звезда '+Name(cur_star));",
                        "            TryAgain = TryAgain + 1;",
                        "            if(TryAgain==1500) break;",
                        "            if(StarOwner(cur_star)>0) continue; //Исключаем некоалиционные системы и системы с кастомной расой",
                        "            if(StarCustomFaction(cur_star)!='') continue;",
                        "            if(StarToCon(cur_star)==StarToCon(PlanetToStar(PlanetPirateClan()))) continue; //Исключаем Тортугац и Нифигац на всякий случай",
                        "            i = StarPlanets(cur_star);",
                        "            cur_planet = StarPlanets(cur_star,Rnd(0,i-1));",
                        "            while(PlanetOwner(cur_planet)==6) {",
                        "                cur_planet = StarPlanets(cur_star,Rnd(0,i-1));",
                        "                TryAgainPlanets = TryAgainPlanets+1;",
                        "                if(TryAgainPlanets==30) break;",
                        "            }",
                        "            if(TryAgainPlanets==30) continue;",
                        "            if(PlanetChoosed==cur_planet) continue;",
                        "            if(PlanetChoosed1==cur_planet) continue;",
                        "            PlanetChoosed2 = cur_planet;",
                        "            nope = 1;",
                        "        }",
                        "    }",
                        "    if(ForRandom == 89) {",
                        "        ForRandomCount = Rnd(130,160);",
                        "    }",
                        "    if(ForRandom == 92) {",
                        "        ForRandomCount = Rnd(65,110);",
                        "    }",
                        "    if(ForRandom == 98) {",
                        "        ForRandomCount = Rnd(120,510);",
                        "    }",
                        "    if(ForRandom == 104) {",
                        "        ForRandomCount = Rnd(20,400);",
                        "    }",
                        "    if(ForRandom == 105) {",
                        "        ForRnd = Rnd(1,3);",
                        "        if(ForRnd == 1) tstr = \"«Цуфай», «Операция Коалиционная сила», «Песнь радиоактивной пустыни», «Гралгарский бой»\";",
                        "        if(ForRnd == 2) tstr = \"«Иное неважно», «Аль-Дагор», «Смута», «Алая лилия»\";",
                        "        if(ForRnd == 3) tstr = \"«Солнце», «Пробил час», «Стальные воины», «Я жду»\";",
                        "    }",
                        "    if(ForRandom == 102) {",
                        "        ForRnd = Rnd(1,5);",
                        "        if(ForRnd == 1) tstr = \"Айзиф Желязны\";",
                        "        if(ForRnd == 2) tstr = \"Феникс Держинский\";",
                        "        if(ForRnd == 3) tstr = \"Вальдемар Аль-Лени\";",
                        "        if(ForRnd == 4) tstr = \"Серго Кир\";",
                        "        if(ForRnd == 5) tstr = \"Лазарре Каган\";",
                        "        if(ForRnd == 6) tstr = \"Яссиф Юразельски\";",
                        "    }",
                        "    if(ForRandom == 95) {",
                        "        ForRnd = Rnd(1,10);",
                        "        if(ForRnd == 1) tstr = \"Азириум\";",
                        "        if(ForRnd == 2) tstr = \"Лайстар\";",
                        "        if(ForRnd == 3) tstr = \"Мезинно\";",
                        "        if(ForRnd == 4) tstr = \"Ветрум\";",
                        "        if(ForRnd == 5) tstr = \"Фонсторт\";",
                        "        if(ForRnd == 6) tstr = \"Алленто\";",
                        "        if(ForRnd == 7) tstr = \"Венеччо\";",
                        "        if(ForRnd == 8) tstr = \"Лигари\";",
                        "        if(ForRnd == 9) tstr = \"Анабакко\";",
                        "        if(ForRnd == 10) tstr = \"Шелесто\";",
                        "    }",
                        "    if(ForRandom == 44) {",
                        "        ForRnd = Rnd(1,5);",
                        "        if(ForRnd == 1) tstr = \"Маяк\";",
                        "        if(ForRnd == 2) tstr = \"Энергия\";",
                        "        if(ForRnd == 3) tstr = \"Искра\";",
                        "        if(ForRnd == 4) tstr = \"Вестник\";",
                        "        if(ForRnd == 5) tstr = \"3294\";",
                        "    }",
                        "    if(ForRandom == 59) {",
                        "        ForRnd = Rnd(1,5);",
                        "        if(ForRnd == 1) tstr = \"Литвинова\";",
                        "        if(ForRnd == 2) tstr = \"Молоточкина\";",
                        "        if(ForRnd == 3) tstr = \"Кисельродде\";",
                        "        if(ForRnd == 4) tstr = \"Громина\";",
                        "        if(ForRnd == 5) tstr = \"Грибожуева\";",
                        "    }",
                        "    if(ForRandom == 89) {",
                        "        ForRnd = Rnd(1,3);",
                        "        if(ForRnd == 1) tstr = \"Холодная Кинза\";",
                        "        if(ForRnd == 2) tstr = \"ГУМ\";",
                        "        if(ForRnd == 3) tstr = \"Тайкон-холл\";",
                        "    }",
                        "    //SFT(Name(PlanetChoosed));",
                        "    //SFT(Name(PlanetChoosed1));",
                        "    //SFT(Name(PlanetChoosed2)); //отладОчка",
                        "    //SFT(Name(StarChoosed));",
                        "    //SFT(Name(StarChoosed1));",
                        "    if(PlanetChoosed != 0) {",
                        "        AddPlanetNews(Format(CT('AdditionalNews.Regular' + ForRandom),'#pl1#',PlanetName(PlanetChoosed),'#pl2#',PlanetName(PlanetChoosed1),'#pl3#',PlanetName(PlanetChoosed2),'#star1#',StarName(StarChoosed),'#star2#',StarName(StarChoosed1),'#count1#',ForRandomCount,'#Tapok#',tstr,'#Stalin#',tstr,'#Compl#',tstr,'#Radio#',tstr,'#Molotov#',tstr,'#center#',tstr),72);",
                        "        // Жёстко вставили выбранное в новость, после чего выпустили её с рандомным номером, который мы выбрали выше",
                        "        // Можно бы было не искать каждый раз все 2 звёзды и 3 планеты, но слишком много работы при сомнительной пользе",
                        "        c = ControlledSystems(0);",
                        "        if(c<=5) NewsTimer = Rnd(2, 6);",
                        "        else if(c<=10) NewsTimer = Rnd(2,5);",
                        "        else if(c<=20) NewsTimer = Rnd(1,4);",
                        "        else if(c<=30) NewsTimer = Rnd(1,3); // чем больше свободных систем, тем чаще новасти",
                        "        else if(c<=50) NewsTimer = Rnd(1,2);",
                        "        else NewsTimer = 1;",
                        "        timerNew[ForRandom] = Rnd(35,80);",
                        "        if (ForRandom == 15) timer[15] = 1460; //Новость про Олимпиаду",
                        "        if (ForRandom == 88) timer[88] = Rnd(150,400); //Новость про успехи пятилетки",
                        "        if (ForRandom == 102) timer[102] = Rnd(350,800); //Речь Желязны",
                        "        if (ForRandom == 108) timer[108] = Rnd(150,400); //Новость про успехи пятилетки",
                        "        if (ForRandom == 109) timer[109] = Rnd(1250,1600); //Новость про Давос",
                        "        //Ставим таймер в зависимости от количества свободных систем у Cockалиции",
                        "        //И таймер для вкинутой новости",
                        "        TryAgain = 0;",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 210,
                    "Pos.y": 120,
                    "Parent": -1,
                    "#": 7,
                    "Code.Type": "Global",
                    "Code": 
                    [
                        "GRun();"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 210,
                    "Pos.y": 150,
                    "Parent": -1,
                    "#": 12,
                    "Code.Type": "Init",
                    "Code": 
                    [
                        "//Старые штуки, теперь они история",
                        "ArrayAdd(blacklist, 31);",
                        "ArrayAdd(blacklist, 32);",
                        "ArrayAdd(blacklist, 44);",
                        "ArrayAdd(blacklist, 54);",
                        "ArrayAdd(blacklist, 59);",
                        "ArrayAdd(blacklist, 93);",
                        "ArrayAdd(blacklist, 111);",
                        "ArrayAdd(blacklist, 117);",
                        "//Настало время адекватных массивов",
                        "timerNew = newarray(CT('AdditionalNews.RegularNewsCount'));",
                        "CT('AdditionalNews.blacklistNews',blacklistNew);",
                        "",
                        "for (i= 0; i < ArrayDim(timerNew); i = i + 1) timerNew[i] = 0;",
                        "//Функция для исправления перевеса корабля (если он есть): расширяет вместимость корпуса, повышает HP до максимума",
                        "function FixOverweight(ship)",
                        "{",
                        "    ShipCalcParam(ship);",
                        "    int space = ShipFreeSpace(ship);",
                        "    if(space < 0)",
                        "    {",
                        "        dword hull = ShipItems(ship, 0);",
                        "        ItemSize(hull, ItemSize(hull) + abs(space) + Rnd(1, 3));",
                        "        HullHP(hull, ItemSize(hull));",
                        "        ShipCalcParam(ship);",
                        "    }",
                        "}",
                        "",
                        "//Чтобы не требовало новой игры",
                        "StartSectorNews = 1;",
                        "",
                        "for(i=0;GalaxySectors()>i;i=i+1) {",
                        "    StarChoosed = GalaxySectors(i);",
                        "    for(j=0;ConStars(StarChoosed)>j;j=j+1) {",
                        "        StarChoosed1 = ConStar(StarChoosed,j);",
                        "        if(StarOwner(StarChoosed1) || StarCustomFaction(StarChoosed1) != '') {",
                        "            SectorsArray[i] = 1;",
                        "            break;",
                        "        }",
                        "    }",
                        "}",
                        "",
                        "function g_UpdateCD() {",
                        "    NewsCD = Rnd(100,250);",
                        "}",
                        "",
                        "NewsCD = 0;",
                        "",
                        "Version = CT('AdditionalNews.RegularNewsVersion');"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 240,
                    "Pos.y": 310,
                    "Parent": -1,
                    "#": 27,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Чтобы не перемешивать, отдельный блок для ивента \"Война\"",
                        "//1950 - это где-то месяц 3-4 3305 года, если что",
                        "if(CurTurn() > 1950) {",
                        "    //SFT('Откладка - война');",
                        "    if(UntilNextWar == 0) {",
                        "        if(WarStarted == 0) {",
                        "            j = GalaxyStars();",
                        "            TryAgain = 0;",
                        "            while(WarPlanet == 0) {",
                        "                choosed_star = GalaxyStar(Rnd(0,j-1)); //выбираем рандомную звёздов",
                        "                TryAgain = TryAgain + 1;",
                        "                if(TryAgain>=300) {",
                        "                    UntilNextWar = 60;",
                        "                    break;",
                        "                }",
                        "                if(StarOwner(choosed_star)>0) continue; //Исключаем некоалиционные системы и системы с кастомной расой",
                        "                if(StarCustomFaction(choosed_star)!='') continue;",
                        "                if(StarToCon(choosed_star)==StarToCon(PlanetToStar(PlanetPirateClan()))) continue; //Исключаем Тортугац и Нифигац на всякий случай",
                        "                i = StarPlanets(choosed_star);",
                        "                choosed_planet = StarPlanets(choosed_star,Rnd(0,i-1));",
                        "                //SFT(Name(choosed_star));",
                        "                //SFT(choosed_planet);",
                        "                //SFT(Name(choosed_planet));",
                        "                while(PlanetOwner(choosed_planet) > 4) {",
                        "                    choosed_planet = StarPlanets(choosed_star,Rnd(0,i-1));",
                        "                    TryAgainPlanets = TryAgainPlanets+1;",
                        "                    if(TryAgainPlanets>=30) break; //если перебрали всё, а не нашли заселёнок",
                        "                }",
                        "                if(TryAgainPlanets>=30) {",
                        "                    UntilNextWar = 60;",
                        "                    break;",
                        "                }",
                        "                if(choosed_planet == LastPlanet) continue;",
                        "                WarPlanetID = Id(choosed_planet); //выбрали планету, которой не повезло",
                        "",
                        "                while(1) {",
                        "                    for(i=0;StarPlanets(choosed_star)>i;i=i+1) {",
                        "                        TryAgainPlanets = TryAgainPlanets+1;",
                        "                        if(TryAgainPlanets>=30) break;",
                        "                        choosed_planet = StarPlanets(choosed_star,i);",
                        "                        if(PlanetOwner(choosed_planet) > 4) continue;",
                        "                    }",
                        "",
                        "                    if(TryAgainPlanets>=30) {",
                        "                        UntilNextWar = 60;",
                        "                        break;",
                        "                    }",
                        "                }",
                        "",
                        "                if(UntilNextWar) break;",
                        "            }",
                        "            if(!UntilNextWar) {",
                        "                WarStarted = 1;",
                        "                WarTimer = Rnd(5,8);",
                        "                AddPlanetNews(Format(CT('AdditionalNews.WarNews.NewsStart'),'#pl1#',Name(IdToPlanet(WarPlanetID))),73); //начали войну",
                        "            }",
                        "        }",
                        "        if(WarStarted == 1) {",
                        "            if(WarTimer == 0) {",
                        "                AddPlanetNews(Format(CT('AdditionalNews.WarNews.NewsBomb'),'#pl1#',Name(IdToPlanet(WarPlanetID))),73); //новость о бомбардировке фэянами пеленгов",
                        "                WarTimer = Rnd(3,5);",
                        "                WarStarted = 2; //налёт на Клотвилль 7 августа 3341 года",
                        "            }",
                        "        }",
                        "        if(WarStarted == 2) {",
                        "            if(WarTimer == 0) {",
                        "                AddPlanetNews(Format(CT('AdditionalNews.WarNews.NewsTryToAttack'),'#pl1#',Name(IdToPlanet(WarPlanetID))),73); //попытка пеленгского десанта",
                        "                WarTimer = Rnd(1,3);",
                        "                WarStarted = 3; //пеленги лошки, не могут даже десант высадить)",
                        "            }",
                        "        }",
                        "        if(WarStarted == 3) {",
                        "            if(WarTimer == 0) {",
                        "                AddPlanetNews(Format(CT('AdditionalNews.WarNews.NewsFisrtAttack'),'#pl1#',Name(IdToPlanet(WarPlanetID))),73); //дебют фэянских сил",
                        "                WarTimer = Rnd(45,65);",
                        "                WarStarted = 4;",
                        "                BattlesOnStage1 = 1; //ФЭЯНЕ В АТАКУ! ЛЮДИ С ВАМИ!",
                        "            }",
                        "        }",
                        "        if(WarStarted == 4) {",
                        "            WarGoing = WarGoing + 1;",
                        "            if(WarStages == 0) {",
                        "                if(WarTimer == 0) {",
                        "                    l = Rnd(1,1000);",
                        "                    if(InterventionStarted == 1) l = l + 75;",
                        "                    if(BattlesOnStage1 > 0) {",
                        "                        SupportVar = BattlesOnStage1 * 50;",
                        "                        l = l + SupportVar;",
                        "                    }",
                        "                    if(l >= 995) {",
                        "                        AddPlanetNews(Format(CT('AdditionalNews.WarNews.NewsEndOnWayToVictory'),'#pl1#',Name(IdToPlanet(WarPlanetID))),73);",
                        "                        GoodsSellPrice(IdToPlanet(WarPlanetID),t_Arms,90);",
                        "                        GoodsBuyPrice(IdToPlanet(WarPlanetID),t_Arms,140);",
                        "                        PlanetSetGoods(IdToPlanet(WarPlanetID),t_Arms,250);",
                        "                        PeopleSupport = 0;",
                        "                        WarStarted = 0;",
                        "                        WarStages = 0;",
                        "                        WarGoing = 0;",
                        "                        FromLastNews = 0;",
                        "                        BattlesOnStage1 = 0; //На всякий случай обнуляем все переменные, а то мало ли?",
                        "                        BattlesOnStage2 = 0;",
                        "                        WarPlanetID = 0;",
                        "                        BombingEvent = 0;",
                        "                        SU = 0;",
                        "                        l = 0;",
                        "                        WarTimer = 0;",
                        "                        InterventionStarted = 0;",
                        "                        UntilNextWar = Rnd(1800,3200); //Если фэяне \"провели\" операцию блестяще - пеленги в ужасе сдались",
                        "                    }",
                        "                    if(l > 500 && l < 995) {",
                        "                        AddPlanetNews(Format(CT('AdditionalNews.WarNews.NewsAttack1'),'#pl1#',Name(IdToPlanet(WarPlanetID))),73);",
                        "                        BattlesOnStage1 = BattlesOnStage1 + 1;",
                        "                        FromLastNews = 0;",
                        "                        WarTimer = Rnd(45,80); //В зависимости от рандома фэяне наступают или откатываются, или просто стоят на месте. Т.к. в данном случае откатываться некуда (пеленги не преодолеют фэянский флот), то проверки неудачности ролла просто нету",
                        "                    }",
                        "                }",
                        "            }",
                        "            if(WarStages == 1) {",
                        "                if(WarTimer == 0) {",
                        "                    l = Rnd(1,1000);",
                        "                    if(InterventionStarted == 1) l = l + 75; //Помощь от вмешательства Коалиции решает)",
                        "                    if(BattlesOnStage1 > 0) {",
                        "                        SupportVar = BattlesOnStage1 * 50; //Чем чаще проводятся битвы на, условно говоря, \"уровне\", тем легче фэянам его завхватывать",
                        "                        l = l + SupportVar;",
                        "                    }",
                        "                    if(l >= 997) {",
                        "                        AddPlanetNews(Format(CT('AdditionalNews.WarNews.NewsEndOnWayToVictory'),'#pl1#',Name(IdToPlanet(WarPlanetID))),73);",
                        "                        GoodsSellPrice(IdToPlanet(WarPlanetID),t_Arms,90);",
                        "                        GoodsBuyPrice(IdToPlanet(WarPlanetID),t_Arms,140);",
                        "                        PlanetSetGoods(IdToPlanet(WarPlanetID),t_Arms,250);",
                        "                        PeopleSupport = 0;",
                        "                        WarStarted = 0;",
                        "                        WarStages = 0;",
                        "                        WarGoing = 0;",
                        "                        FromLastNews = 0;",
                        "                        BattlesOnStage1 = 0; //На всякий случай обнуляем все переменные, а то мало ли?",
                        "                        BattlesOnStage2 = 0;",
                        "                        WarPlanetID = 0;",
                        "                        BombingEvent = 0;",
                        "                        SU = 0;",
                        "                        l = 0;",
                        "                        WarTimer = 0;",
                        "                        InterventionStarted = 0;",
                        "                        UntilNextWar = Rnd(1800,3200); //Если фэяне \"провели\" операцию блестяще - пеленги в ужасе сдались",
                        "                    }",
                        "                    if(l > 500 && l < 997) {",
                        "                        AddPlanetNews(Format(CT('AdditionalNews.WarNews.NewsAttack2'),'#pl1#',Name(IdToPlanet(WarPlanetID))),73);",
                        "                        BattlesOnStage2 = BattlesOnStage2 + 1;",
                        "                        FromLastNews = 0;",
                        "                        WarStages = 2;",
                        "                        WarTimer = Rnd(45,80); //В зависимости от рандома фэяне наступают или откатываются, или просто стоят на месте",
                        "                    }",
                        "                    if(l < 200) {",
                        "                        AddPlanetNews(Format(CT('AdditionalNews.WarNews.NewsCounter1'),'#pl1#',Name(IdToPlanet(WarPlanetID))),73);",
                        "                        BattlesOnStage1 = BattlesOnStage1 + 1;",
                        "                        FromLastNews = 0;",
                        "                        WarStages = 0;",
                        "                        WarTimer = Rnd(45,80);",
                        "                    }",
                        "                }",
                        "            }",
                        "            if(WarStages == 2) {",
                        "                if(WarTimer == 0) {",
                        "                    l = Rnd(1,1000);",
                        "                    if(InterventionStarted == 1) l = l + 75;",
                        "                    if(BattlesOnStage1 > 0) {",
                        "                        SupportVar = BattlesOnStage1 * 50;",
                        "                        l = l + SupportVar;",
                        "                    }",
                        "                    if(l > 550) {",
                        "                        AddPlanetNews(Format(CT('AdditionalNews.WarNews.NewsAttack3'),'#pl1#',Name(IdToPlanet(WarPlanetID))),73);",
                        "                        BattlesOnStage1 = BattlesOnStage1 + 1;",
                        "                        FromLastNews = 0;",
                        "                        WarStages = 3;",
                        "                        WarTimer = Rnd(20,30); //В зависимости от рандома фэяне наступают или откатываются, или просто стоят на месте",
                        "                    }",
                        "                    if(l < 200) {",
                        "                        AddPlanetNews(Format(CT('AdditionalNews.WarNews.NewsCounter2'),'#pl1#',Name(IdToPlanet(WarPlanetID))),73);",
                        "                        BattlesOnStage1 = BattlesOnStage1 + 1;",
                        "                        FromLastNews = 0;",
                        "                        WarStages = 1;",
                        "                        WarTimer = Rnd(45,80);",
                        "                    }",
                        "                }",
                        "            }",
                        "            if(WarStages == 3) {",
                        "                if(WarTimer == 0) {",
                        "                        AddPlanetNews(Format(CT('AdditionalNews.WarNews.NewsEndViaWar'),'#pl1#',Name(IdToPlanet(WarPlanetID))),73);",
                        "                        GoodsSellPrice(IdToPlanet(WarPlanetID),t_Arms,70);",
                        "                        GoodsBuyPrice(IdToPlanet(WarPlanetID),t_Arms,180);",
                        "                        PlanetSetGoods(IdToPlanet(WarPlanetID),t_Arms,400);",
                        "                        l = PlanetPopulation(IdToPlanet(WarPlanetID)) - 20;",
                        "                        PlanetPopulation(IdToPlanet(WarPlanetID),l);",
                        "                        PeopleSupport = 0;",
                        "                        WarStarted = 0;",
                        "                        WarStages = 0;",
                        "                        WarGoing = 0;",
                        "                        FromLastNews = 0;",
                        "                        BattlesOnStage1 = 0; //На всякий случай обнуляем все переменные, а то мало ли?",
                        "                        BattlesOnStage2 = 0;",
                        "                        WarPlanetID = 0;",
                        "                        BombingEvent = 0;",
                        "                        SU = 0;",
                        "                        l = 0;",
                        "                        WarTimer = 0;",
                        "                        InterventionStarted = 0;",
                        "                        UntilNextWar = Rnd(1800,3200); //Война выиграна - максимальнй кулдаун",
                        "                }",
                        "            }",
                        "            if(WarGoing >= 280) {",
                        "                l = Rnd(1,100);",
                        "                if(l > 50) {",
                        "                    AddPlanetNews(Format(CT('AdditionalNews.WarNews.InterventionStarts'),'#pl1#',Name(IdToPlanet(WarPlanetID))),73);",
                        "                    FromLastNews = 0;",
                        "                    InterventionStarted = 1;",
                        "                }",
                        "            }",
                        "            if(FromLastNews >= 140) { //Если с новостями совсем всё туго - смотрим, как давно не было новостей, и выпускаем новость (скорее всего, про теракт)",
                        "                if(FromLastNews <= 180) {",
                        "                    l = Rnd(1,60);",
                        "                    if(l > 50) {",
                        "                        if(BombingEvent == 0) {",
                        "                            AddPlanetNews(Format(CT('AdditionalNews.WarNews.NewsBomb'),'#pl1#',Name(IdToPlanet(WarPlanetID))),73);",
                        "                            BombingEvent = 1;",
                        "                            FromLastNews = 0;",
                        "                        }",
                        "                        else {",
                        "                            AddPlanetNews(Format(CT('AdditionalNews.WarNews.NewsTerract'),'#pl1#',Name(IdToPlanet(WarPlanetID))),73);",
                        "                            FromLastNews = 0;",
                        "                        }",
                        "                    }",
                        "                }",
                        "                if(FromLastNews <= 240) {",
                        "                    l = Rnd(15,80);",
                        "                    if(l > 50) {",
                        "                        if(BombingEvent == 0) {",
                        "                            AddPlanetNews(Format(CT('AdditionalNews.WarNews.NewsBomb'),'#pl1#',Name(IdToPlanet(WarPlanetID))),73);",
                        "                            BombingEvent = 1;",
                        "                            FromLastNews = 0;",
                        "                        }",
                        "                        else {",
                        "                            AddPlanetNews(Format(CT('AdditionalNews.WarNews.NewsTerract'),'#pl1#',Name(IdToPlanet(WarPlanetID))),73);",
                        "                            FromLastNews = 0;",
                        "                        }",
                        "                    }",
                        "                }",
                        "                if(FromLastNews <= 300) {",
                        "                    l = Rnd(30,95);",
                        "                    if(l > 50) {",
                        "                        if(BombingEvent == 0) {",
                        "                            AddPlanetNews(Format(CT('AdditionalNews.WarNews.NewsBomb'),'#pl1#',Name(IdToPlanet(WarPlanetID))),73);",
                        "                            BombingEvent = 1;",
                        "                            FromLastNews = 0;",
                        "                        }",
                        "                        else {",
                        "                            AddPlanetNews(Format(CT('AdditionalNews.WarNews.NewsTerract'),'#pl1#',Name(IdToPlanet(WarPlanetID))),73);",
                        "                            FromLastNews = 0;",
                        "                        }",
                        "                    }",
                        "                }",
                        "                else {",
                        "                    l = Rnd(45,100);",
                        "                    if(l > 50) {",
                        "                        if(BombingEvent == 0) {",
                        "                            AddPlanetNews(Format(CT('AdditionalNews.WarNews.NewsBomb'),'#pl1#',Name(IdToPlanet(WarPlanetID))),73);",
                        "                            BombingEvent = 1;",
                        "                            FromLastNews = 0;",
                        "                        }",
                        "                        else {",
                        "                            AddPlanetNews(Format(CT('AdditionalNews.WarNews.NewsTerract'),'#pl1#',Name(IdToPlanet(WarPlanetID))),73);",
                        "                            FromLastNews = 0;",
                        "                        }",
                        "                    }",
                        "                }",
                        "            }",
                        "            if(PeopleSupport <= 30) {",
                        "                SU = Rnd(15 + PeopleSupport,100);",
                        "                if(SU <= 50) {",
                        "                    AddPlanetNews(Format(CT('AdditionalNews.WarNews.NewsEndRevolution'),'#pl1#',Name(IdToPlanet(WarPlanetID))),73);",
                        "                    PlanetGov(WarPlanet,4);",
                        "                    GoodsSellPrice(WarPlanet,t_Arms,890);",
                        "                    GoodsBuyPrice(WarPlanet,t_Arms,420);",
                        "                    GoodsSellPrice(WarPlanet,t_Narcotics,290);",
                        "                    GoodsBuyPrice(WarPlanet,t_Narcotics,70);",
                        "                    PlanetSetGoods(WarPlanet,t_Arms,0);",
                        "                    PlanetSetGoods(WarPlanet,t_Narcotics,0);",
                        "                    PeopleSupport = 0;",
                        "                    WarStarted = 0;",
                        "                    WarStages = 0;",
                        "                    WarGoing = 0;",
                        "                    FromLastNews = 0;",
                        "                    BattlesOnStage1 = 0; //На всякий случай обнуляем все переменные, а то мало ли?",
                        "                    BattlesOnStage2 = 0;",
                        "                    WarPlanetID = 0;",
                        "                    BombingEvent = 0;",
                        "                    SU = 0;",
                        "                    l = 0;",
                        "                    WarTimer = 0;",
                        "                    InterventionStarted = 0;",
                        "                    UntilNextWar = Rnd(1600,3000); //Если населению надоела война, то начинается революция, оканчивающая войну, сменяющая строй и подчищающая магазин",
                        "                }",
                        "            }",
                        "        }",
                        "    }",
                        "    WarTimer = WarTimer - 1;",
                        "    UntilNextWar = UntilNextWar - 1;",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 240,
                    "Pos.y": 520,
                    "Parent": -1,
                    "#": 28,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Чтобы не перемешивать, отдельный блок для ивента \"Научный консиллиум\"",
                        "if(CurTurn() > 4100) {",
                        "    if(WaitingForConsilium == 0) {",
                        "        j = GalaxyStars();",
                        "        TryAgain = 0;",
                        "        while(PlanetForConsilliumID == 0) {",
                        "            choosed_star = GalaxyStar(Rnd(0,j-1)); //выбираем рандомную звёздов",
                        "            TryAgain = TryAgain + 1;",
                        "            if(TryAgain==300) {",
                        "                WaitingForConsilium = 50;",
                        "                break;",
                        "            }",
                        "            if(StarOwner(choosed_star)>0) continue; //Исключаем некоалиционные системы и системы с кастомной расой",
                        "            if(StarCustomFaction(choosed_star)!='') continue;",
                        "            if(StarToCon(choosed_star)==StarToCon(PlanetToStar(PlanetPirateClan()))) continue; //Исключаем Тортугац и Нифигац на всякий случай",
                        "            i = StarPlanets(choosed_star);",
                        "            choosed_planet = StarPlanets(choosed_star,Rnd(0,i-1));",
                        "            while(PlanetOwner(choosed_planet)==6) {",
                        "                choosed_planet = StarPlanets(choosed_star,Rnd(0,i-1));",
                        "                TryAgainPlanets = TryAgainPlanets+1;",
                        "                if(TryAgainPlanets==30) break; //если перебрали всё, а не нашли заселёнок",
                        "            }",
                        "            if(TryAgainPlanets==30) continue;",
                        "            if(LastPlanet > 0) {",
                        "                if(choosed_planet == IdToPlanet(LastPlanet)) continue;",
                        "            }",
                        "            PlanetForConsilliumID = Id(choosed_planet);",
                        "            StartConsillium = 1;",
                        "        }",
                        "        if(StartConsillium == 1) {",
                        "            FreeSystems = ControlledSystems(0);",
                        "            AddPlanetNews(Format(CT('AdditionalNews.ScienceNews.NewsStart'),'#pl1#',PlanetName(IdToPlanet(PlanetForConsilliumID)),'#count1#',FreeSystems),74);",
                        "            ConsilliumTaimer = Rnd(85,120); //Консилиум начался - выставляем время его проведения",
                        "            StartConsillium = 2;",
                        "        }",
                        "        if(StartConsillium == 2) {",
                        "            if(StarBattle > 0) {",
                        "                AddPlanetNews(Format(CT('AdditionalNews.ScienceNews.NewsBreak'),'#pl1#',PlanetName(IdToPlanet(PlanetForConsilliumID)),'#star1',choosed_star),74);",
                        "                PlanetBoostInventions(IdToPlanet(PlanetForConsilliumID),90);",
                        "                WaitingForConsilium = Rnd(150,200);",
                        "                ConsilliumTaimer = 0;",
                        "                choosed_star = 0;",
                        "                StartConsillium = 0;",
                        "                PlanetForConsilliumID = 0;",
                        "            }",
                        "            ConsilliumTaimer = ConsilliumTaimer - 1; //Если на систему напали - Консилиум закрывается, но и начнётся снова он раньше",
                        "        }",
                        "        if(ConsilliumTaimer == 0) {",
                        "            AddPlanetNews(Format(CT('AdditionalNews.ScienceNews.NewsEnd'),'#pl1#',PlanetName(IdToPlanet(PlanetForConsilliumID))),74);",
                        "            InvestitionsBuff = Rnd(270,380);",
                        "            PlanetBoostInventions(IdToPlanet(PlanetForConsilliumID),InvestitionsBuff);",
                        "            StartConsillium = 0;",
                        "            choosed_star = 0;",
                        "            LastPlanet = PlanetForConsilliumID;",
                        "            PlanetForConsilliumID = 0; //Консилиум успешно завершился - ура! Накидываем планете бонусов к технологиям.",
                        "            WaitingForConsilium = Rnd(350,500);",
                        "        }",
                        "    }",
                        "    WaitingForConsilium = WaitingForConsilium - 1;",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 240,
                    "Pos.y": 710,
                    "Parent": -1,
                    "#": 29,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Чтобы не перемешивать, отдельный блок для ивента \"Организация контрабандистов\"",
                        "//if(CurTurn() > 700) {",
                        "//Bdup Bdup kontrabandistov ne budet t.k. Marshal naelsya i spit",
                        "//I voobshe ya AltStart pilyu",
                        "//}",
                        "",
                        "//Теперь тут будет поиск события \"ушатать бертора\"",
                        "if(!DomiksDefeated()) {",
                        "    if(!ShipIsTakeoff(Player())) {",
                        "        for(i=GalaxyEvents()-1; i>=0; i=i-1) {",
                        "            if(GalaxyEventDate(i) < CurTurn()) break;",
                        "            if(GalaxyEventType(i)=='PlayerKillsShip') { //игрок убил кого-то!",
                        "                if(GalaxyEventData(i,3) != Kling) continue; //Это домик!",
                        "                if(GalaxyEventData(i,5) != 6) continue; //Это бертор!",
                        "",
                        "                if(TitleCD < 1) {",
                        "                    BertorsKilled = BertorsKilled + 1;",
                        "                    KillsCD = 150;",
                        "                    if(BertorsKilled >= 5) {",
                        "                        KillsCD = 0;",
                        "                        BertorsKilled = 0;",
                        "                        TitleCD = 400;",
                        "                        tstr = '</color>' + Format(CT('BertorThanks.1'),'name',ShortName(Player()));",
                        "                        NewsAdd(tstr);",
                        "                        AddPlanetNews(tstr,75);",
                        "                        if(~findsubstr(Name(Player()),CT('BertorThanks.Rank'))) SetName(Player(),ShortName(Player())+' '+CT('BertorThanks.Rank'));",
                        "                        GiveReward(Player(),ShipPilotRace(),0);",
                        "                        Sound('Sound.NewMsg');",
                        "                    }",
                        "                }",
                        "                else {",
                        "                    TitleCD = 600;",
                        "                }",
                        "            }",
                        "        }",
                        "    }",
                        "",
                        "    if(TitleCD > 0) TitleCD = TitleCD - 1;",
                        "    if(KillsCD > 0) KillsCD = KillsCD - 1;",
                        "}",
                        "",
                        "//Титул Освободитель",
                        "if(!Liberator) {",
                        "    if(ShipStatistic(Player(),3) > 99) {",
                        "        Liberator = 1;",
                        "        GiveReward(Player(),ShipPilotRace(),0);",
                        "        tstr = '</color>' + Format(CT('SaverOfWorldsThanks.1'),'name',ShortName(Player()));",
                        "        NewsAdd(tstr);",
                        "        AddPlanetNews(tstr,75);",
                        "        if(~findsubstr(Name(Player()),CT('SaverOfWorldsThanks.Rank'))) SetName(Player(),ShortName(Player())+' '+CT('SaverOfWorldsThanks.Rank'));",
                        "        Sound('Sound.NewMsg');",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 600,
                    "Pos.y": 710,
                    "Parent": -1,
                    "#": 30,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Чтобы не перемешивать, отдельный блок для ивента \"Финансовый листок\"",
                        "if(CurTurn() > 300) {",
                        "    if(ControlledSystems(0) > 0) {",
                        "        date = CurTurn() - 300;",
                        "        if(date % 365 == 0){",
                        "            //SFT('Откладка - финансовый');",
                        "            SUCRN = ControlledSystems(0); //SUCRN - Systems Under Coalition Right Now, SUCYA - ~ Year Ago.",
                        "            if(SUCYA > SUCRN) {",
                        "                VPKpart = (CT('AdditionalNews.FinancicalNews.NewsVPK3'));",
                        "            }",
                        "            if(SUCYA < SUCRN) {",
                        "                VPKpart = (CT('AdditionalNews.FinancicalNews.NewsVPK1'));",
                        "            }",
                        "            if(SUCYA = SUCRN) {",
                        "                VPKpart = (CT('AdditionalNews.FinancicalNews.NewsVPK2'));",
                        "            }",
                        "            SUCYA = SUCRN;",
                        "            AllSystems = GalaxyStars;",
                        "            AllSystems = AllSystems * 100;",
                        "            SUPRN = ControlledSystems(2); //Systems Under Pirates Right Now",
                        "            if(AllSystems % SUCRN >= 25) Creditspart = (CT('AdditionalNews.FinancicalNews.NewsCredits1'));",
                        "            if(ControlledSystems(2) > 0) {",
                        "                if(AllSystems % SUPRN >= 50) Creditspart = (CT('AdditionalNews.FinancicalNews.NewsCredits2'));",
                        "            }",
                        "            if(AllSystems % SUCRN < 25) Creditspart = (CT('AdditionalNews.FinancicalNews.NewsCredits3'));",
                        "            LocalRND = Rnd(1,5);",
                        "            if(LocalRND = 1) Minfinpart = (CT('AdditionalNews.FinancicalNews.NewsMinFin1'));",
                        "            if(LocalRND = 2) Minfinpart = (CT('AdditionalNews.FinancicalNews.NewsMinFin2'));",
                        "            if(LocalRND = 3) Minfinpart = (CT('AdditionalNews.FinancicalNews.NewsMinFin3'));",
                        "            if(LocalRND = 4) Minfinpart = (CT('AdditionalNews.FinancicalNews.NewsMinFin4'));",
                        "            if(LocalRND = 5) Minfinpart = (CT('AdditionalNews.FinancicalNews.NewsMinFin5'));",
                        "            //if(RangersCapital < 120000) Minfinpart = (CT('FinancicalNews.NewsMinFin1'));",
                        "            //if(RangersCapital < 180000 & RangersCapital >= 120000) Minfinpart = (CT('FinancicalNews.NewsMinFin2'));",
                        "            //if(RangersCapital < 320000 & RangersCapital >= 180000) Minfinpart = (CT('FinancicalNews.NewsMinFin3'));",
                        "            //if(RangersCapital < 450000 & RangersCapital >= 320000) Minfinpart = (CT('FinancicalNews.NewsMinFin4'));",
                        "            //if(RangersCapital >= 450000) Minfinpart = (CT('FinancicalNews.NewsMinFin5'));",
                        "            AddPlanetNews(Format(CT('AdditionalNews.FinancicalNews.NewsMagazine'),'#VPK#',VPKpart,'#Credit#',Creditspart,'#Minfin#',Minfinpart),78);",
                        "        }",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 860,
                    "Pos.y": 710,
                    "Parent": -1,
                    "#": 32,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//И чтобы вновь не смешивать, отдельно - ежегодные цикличные новости.",
                        "if(CurTurn() > 300) {",
                        "    date = CurTurn() - 300;",
                        "    if(date % 365 == 0) {",
                        "        //SFT('Откладка - ежегодные');",
                        "        Number = Rnd(1,3);",
                        "        if(Number == NumberOfCombo) {",
                        "            if(ForCombo1 >= 2) {",
                        "                while(Number == NumberOfCombo) {",
                        "                    Number = Rnd(1,3);",
                        "                }",
                        "            }",
                        "        }",
                        "        ForRandomCount2 = Rnd(25,90);",
                        "        AddPlanetNews(Format(CT('AdditionalNews.NotMagazineYearNews.News' + Number),'#countYearly#',ForRandomCount2),79);",
                        "        if(NumberOfCombo == Number) {",
                        "            NumberOfCombo = Number;",
                        "            ForCombo1 = ForCombo1 + 1;",
                        "        }",
                        "        else {",
                        "            NumberOfCombo = Number; //чтобы часто не было новостей про экономическый спад",
                        "            ForCombo1 = 1;",
                        "        }",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 860,
                    "Pos.y": 560,
                    "Parent": -1,
                    "#": 78,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Блок для уведомления о гибели рейнджеров",
                        "for(i=0;GalaxyRangers()>i;i=i+1) {",
                        "    //SFT(Name(GalaxyRangers(i)));",
                        "    if(ShipType(GalaxyRangers(i)) != 'Ranger' && ShipType(GalaxyRangers(i)) != 'FemRanger' && ShipType(GalaxyRangers(i)) != 'RangerExplorer') continue;",
                        "    if(RangerExcludedFromRating(GalaxyRangers(i)) == 0) {",
                        "        if(RangerPlaceInRating(GalaxyRangers(i)) <= 5) {",
                        "            if(!ShipFindCustomShipInfoByType(GalaxyRangers(i),'CatchingDeath')) {",
                        "                ShipAddCustomShipInfo(GalaxyRangers(i),'CatchingDeath','NoShow');",
                        "            }",
                        "        }",
                        "        if(RangerPlaceInRating(GalaxyRangers(i)) > 5) {",
                        "            if(ShipFindCustomShipInfoByType(GalaxyRangers(i),'CatchingDeath')) {",
                        "                ShipDeleteCustomShipInfo(GalaxyRangers(i),'CatchingDeath');",
                        "            }",
                        "        }",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1290,
                    "Pos.y": 320,
                    "Parent": -1,
                    "#": 79,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Ивенты расширенных революций",
                        "if(CurTurn() > 1030) {",
                        "    //SFT('Откладка - революцьон');",
                        "    if(RevoltCD == 0) {",
                        "        TryAgain = 0;",
                        "        j = GalaxyStars();",
                        "        while(PlanetForRevoltID == 0) {",
                        "            choosed_star1 = GalaxyStar(Rnd(0,j-1)); //выбираем рандомную звёздов",
                        "            if(TryAgain == 200) {",
                        "                RevoltCD = 100;",
                        "                break;",
                        "            }",
                        "            if(StarOwner(choosed_star1)>0) continue; //Исключаем некоалиционные системы и системы с кастомной расой",
                        "            if(StarCustomFaction(choosed_star1) != '') continue;",
                        "            if(StarToCon(choosed_star1) == StarToCon(PlanetToStar(PlanetPirateClan()))) continue; //Исключаем Тортугац и Нифигац на всякий случай",
                        "            TryAgain = TryAgain + 1;",
                        "            i = StarPlanets(choosed_star1);",
                        "            choosed_planet1 = StarPlanets(choosed_star1,Rnd(0,i-1));",
                        "            while(PlanetOwner(choosed_planet1) == 6) {",
                        "                choosed_planet1 = StarPlanets(choosed_star1,Rnd(0,i-1));",
                        "                TryAgainPlanets = TryAgainPlanets+1;",
                        "                if(TryAgainPlanets == 30) break; //если перебрали всё, а не нашли заселёнок",
                        "            }",
                        "            if(TryAgainPlanets == 30) continue;",
                        "            if(LastPlanet1 > 0) {",
                        "                if(choosed_planet1 == IdToPlanet(LastPlanet1)) continue;",
                        "            }",
                        "            if(PlanetGov(choosed_planet1)!=3) continue;",
                        "            PlanetForRevoltID = Id(choosed_planet1);",
                        "            StartRevolt = 1;",
                        "            Angry = 0;",
                        "        }",
                        "        if(StartRevolt == 1) {",
                        "            AddPlanetNews(Format(CT('AdditionalNews.ImprovedRevoltNews.TryToReform'),'#pl1#',Name(IdToPlanet(PlanetForRevoltID))),82);",
                        "            StartRevolt = 2;",
                        "            temp_cd = Rnd(50,75);",
                        "        }",
                        "        if(StartRevolt == 2) {",
                        "            if(temp_cd == 0) {",
                        "                int rnd = Rnd(1,100);",
                        "                if(rnd > 95) {",
                        "                    AddPlanetNews(Format(CT('AdditionalNews.ImprovedRevoltNews.CoolReforms'),'#pl1#',Name(IdToPlanet(PlanetForRevoltID))),82);",
                        "                    StartRevolt = 0;",
                        "                    RevoltCD = Rnd(115,200);",
                        "                    GoodsAdd(IdToPlanet(PlanetForRevoltID),t_Technics,135);",
                        "                    GoodsAdd(IdToPlanet(PlanetForRevoltID),t_Medicine,40);",
                        "                }",
                        "                else {",
                        "                    AddPlanetNews(Format(CT('AdditionalNews.ImprovedRevoltNews.BadReforms'),'#pl1#',Name(IdToPlanet(PlanetForRevoltID))),82);",
                        "                    StartRevolt = 3;",
                        "                    temp_cd = Rnd(40,60);",
                        "                    GoodsAdd(IdToPlanet(PlanetForRevoltID),t_Technics,-100);",
                        "                    Angry = Angry + 5;",
                        "                }",
                        "            }",
                        "        }",
                        "        if(StartRevolt == 3) {",
                        "            if(temp_cd == 0) {",
                        "                if(Rnd(Angry,100) > 75) {",
                        "                    AddPlanetNews(Format(CT('AdditionalNews.ImprovedRevoltNews.FirstRevolt'),'#pl1#',Name(IdToPlanet(PlanetForRevoltID))),82);",
                        "                    TimeSpent = 0;",
                        "                    temp_cd = Rnd(20,30);",
                        "                    StartRevolt = 4;",
                        "                    Angry = Angry + 2;",
                        "                }",
                        "                else {",
                        "                    Angry = Angry + Rnd(2,7);",
                        "                    TimeSpent = TimeSpent + 5;",
                        "                }",
                        "            }",
                        "            if(TimeSpent > 20) {",
                        "                if(Rnd(1,2) == 2) {",
                        "                    AddPlanetNews(Format(CT('AdditionalNews.ImprovedRevoltNews.Hunger'),'#pl1#',Name(IdToPlanet(PlanetForRevoltID))));",
                        "                    GoodsAdd(IdToPlanet(PlanetForRevoltID),t_Food,-50000);",
                        "                    DecayGoods(IdToPlanet(PlanetForRevoltID),t_Food);",
                        "                    Angry = Angry + 30;",
                        "                }",
                        "            }",
                        "        }",
                        "        if(StartRevolt == 4) {",
                        "            if(temp_cd == 0) {",
                        "                if(Rnd(Angry,100) < 10) {",
                        "                    temp_cd = Rnd(90,150);",
                        "                    Angry = 0;",
                        "                    StartRevolt = 5;",
                        "                }",
                        "                else if(Rnd(Angry,100) > 10 && Rnd(Angry,100) < 30) {",
                        "                    temp_cd = Rnd(110,180);",
                        "                    Angry = 0;",
                        "                    StartRevolt = 6;",
                        "                    AddPlanetNews(Format(CT('AdditionalNews.ImprovedRevoltNews.CoalitionOfSocDemRevolt'),'#pl1#',Name(IdToPlanet(PlanetForRevoltID))),82);",
                        "                }",
                        "                else {",
                        "                    temp_cd = Rnd(70,90);",
                        "                    Angry = 0;",
                        "                    StartRevolt = 7;",
                        "                    AddPlanetNews(Format(CT('AdditionalNews.ImprovedRevoltNews.OctoberRevolt'),'#pl1#',Name(IdToPlanet(PlanetForRevoltID))),82);",
                        "                }",
                        "            }",
                        "        }",
                        "        if(StartRevolt == 5) {",
                        "            StartRevolt = 0;",
                        "            GoodsAdd(IdToPlanet(PlanetForRevoltID),t_Arms,80);",
                        "            GoodsAdd(IdToPlanet(PlanetForRevoltID),t_Food,-30);",
                        "            GoodsAdd(IdToPlanet(PlanetForRevoltID),t_Luxury,-70);",
                        "            AddPlanetNews(Format(CT('AdditionalNews.ImprovedRevoltNews.FixingSituationDic'),'#pl1#',Name(IdToPlanet(PlanetForRevoltID))),82);",
                        "            PlanetGov(IdToPlanet(PlanetForRevoltID),1);",
                        "            LastPlanet1 = PlanetForRevoltID;",
                        "            PlanetForRevoltID = 0;",
                        "            RevoltCD = Rnd(200,400);",
                        "        }",
                        "        if(StartRevolt == 6) {",
                        "            StartRevolt = 0;",
                        "            GoodsAdd(IdToPlanet(PlanetForRevoltID),t_Arms,40);",
                        "            GoodsAdd(IdToPlanet(PlanetForRevoltID),t_Food,-30);",
                        "            GoodsAdd(IdToPlanet(PlanetForRevoltID),t_Narcotics,50);",
                        "            AddPlanetNews(Format(CT('AdditionalNews.ImprovedRevoltNews.FixingSituationDem'),'#pl1#',Name(IdToPlanet(PlanetForRevoltID))),82);",
                        "            PlanetGov(IdToPlanet(PlanetForRevoltID),4);",
                        "            LastPlanet1 = PlanetForRevoltID;",
                        "            PlanetForRevoltID = 0;",
                        "            RevoltCD = Rnd(350,450);",
                        "        }",
                        "        if(StartRevolt == 7) {",
                        "            StartRevolt = 0;",
                        "            GoodsAdd(IdToPlanet(PlanetForRevoltID),t_Arms,-100);",
                        "            GoodsAdd(IdToPlanet(PlanetForRevoltID),t_Food,350);",
                        "            GoodsAdd(IdToPlanet(PlanetForRevoltID),t_Luxury,-300);",
                        "            GoodsAdd(IdToPlanet(PlanetForRevoltID),t_Narcotics,-1000);",
                        "            GoodsAdd(IdToPlanet(PlanetForRevoltID),t_Minerals,-2000);",
                        "            GoodsAdd(IdToPlanet(PlanetForRevoltID),t_Medicine,100);",
                        "            PlanetEco(IdToPlanet(PlanetForRevoltID),2);",
                        "            AddPlanetNews(Format(CT('AdditionalNews.ImprovedRevoltNews.FixingSituationSoc'),'#pl1#',Name(IdToPlanet(PlanetForRevoltID))),82);",
                        "            PlanetGov(IdToPlanet(PlanetForRevoltID),4);",
                        "            LastPlanet1 = PlanetForRevoltID;",
                        "            PlanetForRevoltID = 0;",
                        "            RevoltCD = Rnd(200,300);",
                        "        }",
                        "    }",
                        "}",
                        "//StartRevolt - прогресс квеста",
                        "//1 - квест только запустился",
                        "//2 - развилка реформ. Могут быть успешными, но и таймер до следующей революции будет совсем недолгим, пхех",
                        "//3 - РЕВОЛЮЦИЯ. Пока её ждут, может случиться ГЛАДОМОР",
                        "//4 - развилка итога. 5 - осталась диктатура эсеров Керенского. 6 - победила коалиция социалистов и демократов. 7 - учредилку разгоняет уставший караул. Да здравствуют большевики!",
                        "if(RevoltCD != 0) RevoltCD = RevoltCD - 1;",
                        "if(temp_cd != 0) temp_cd = temp_cd - 1;"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1080,
                    "Pos.y": 580,
                    "Parent": -1,
                    "#": 80,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Любые празденства",
                        "str temp_str1;",
                        "if(!IsScriptActive('Mod_RefAltStartOnlyPirates')) {",
                        "    if(FlagDomDef == 0) {",
                        "        if(DomiksDefeated()) {",
                        "            temp_str1 = Format(CT('AdditionalNews.CelebrationEvents.DomiksDefeated'),'#date#',GameDateTxtByTurn(CurTurn()));",
                        "            AddPlanetNews(temp_str1);",
                        "            NewsAdd(temp_str1);",
                        "            Sound('Sound.NewMsg');",
                        "            DomiksVictoryDate = CurTurn();",
                        "            FlagDomDef = 1;",
                        "        }",
                        "    }",
                        "    if(FlagNoDoms == 0) {",
                        "        if(ControlledSystems(1) == 0 && DomiksDefeated()) {",
                        "            AddPlanetNews(Format(CT('AdditionalNews.CelebrationEvents.GalaxyCleanedFromDomiks'),'#date#',GameDateTxtByTurn(CurTurn())),81);",
                        "            FlagNoDoms = 1;",
                        "        }",
                        "    }",
                        "}",
                        "if(FlagNoCoal == 0) {",
                        "    if(CoalitionDefeated()) {",
                        "        CoalDeathDate = CurTurn();",
                        "        FlagNoCoal = 1;",
                        "    }",
                        "}",
                        "if(FlagNoPirates == 0) {",
                        "    if(ControlledSystems(2) == 0 && PirateWin() == 3) {",
                        "        AddPlanetNews(Format(CT('AdditionalNews.CelebrationEvents.GalaxyCleanedFromPirates'),'#date#',GameDateTxtByTurn(CurTurn())),81);",
                        "        FlagNoPirates = 1;",
                        "    }",
                        "}",
                        "if(FlagPiratesDef == 0) {",
                        "    if(CoalitionDefeated()) {",
                        "        ClanDeathDate = CurTurn();",
                        "        FlagPiratesDef = 1;",
                        "    }",
                        "}",
                        "//Сверху - победные ивенты. Снизу - годовщины победы",
                        "dword tdwd;",
                        "if(FlagDomDef == 1) {",
                        "    tdwd = CurTurn() - DomiksVictoryDate;",
                        "    if(CurTurn() != DomiksVictoryDate) {",
                        "        if(tdwd % 365 == 0) {",
                        "            if(!CoalitionDefeated()) {",
                        "                AddPlanetNews(Format(CT('AdditionalNews.CelebrationEvents.CelebrateDomiksCoal'),'#count#',tdwd / 365),81);",
                        "            }",
                        "            else {",
                        "                AddPlanetNews(Format(CT('AdditionalNews.CelebrationEvents.DomiksCelebrateDomiksClan'),'#count#',tdwd / 365),81);",
                        "            }",
                        "        }",
                        "    }",
                        "}",
                        "if(FlagPiratesDef == 1) {",
                        "    if(CurTurn() != ClanDeathDate) {",
                        "        tdwd = CurTurn() - ClanDeathDate;",
                        "        if(tdwd % 365 == 0) {",
                        "            AddPlanetNews(Format(CT('AdditionalNews.CelebrationEvents.CelebratePiratesDeath'),'#count#',tdwd / 365),81);",
                        "        }",
                        "    }",
                        "}",
                        "if(FlagNoCoal == 1) {",
                        "    if(CurTurn() != CoalDeathDate) {",
                        "        tdwd = CurTurn() - CoalDeathDate;",
                        "        if(tdwd % 365 == 0) {",
                        "            AddPlanetNews(Format(CT('AdditionalNews.CelebrationEvents.CelebrateCoalitionDeath'),'#count#',tdwd / 365),81);",
                        "        }",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1130,
                    "Pos.y": 710,
                    "Parent": -1,
                    "#": 95,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Решения Галактического Совета",
                        "if(CurTurn() > 300) {",
                        "    date = CurTurn() - 300;",
                        "    if(date % 365 == 0) {",
                        "        SUCRN = ControlledSystems(0); //SUCRN - Systems Under Coalition Right Now, SUCYA - ~ Year Ago",
                        "        dword tdwd1;",
                        "        //SFT('Откладка - решения студсовета');",
                        "        if(SUCYA > SUCRN) {",
                        "            if(SUCRN * 3 / 2 < SUCYA) {",
                        "                AddPlanetNews(CT('AdditionalNews.MobilizationEvents.En_garde1'),80);",
                        "                for(i=0;GalaxyStars()>i;i=i+1) {",
                        "                    if(StarOwner(GalaxyStar(i)) == 0) {",
                        "                        for(j=0;StarPlanets(GalaxyStar(i))>j;j=j+1) {",
                        "                            if(PlanetOwner(StarPlanets(GalaxyStar(i),j)) < 5) {",
                        "                                tdwd1 = BuyWarrior(StarPlanets(GalaxyStar(i),j));",
                        "                                ShipImproveItems(tdwd1,3);",
                        "                                FixOverweight(tdwd1);",
                        "                                ShipFreeExp(tdwd1,12000);",
                        "                                if(Rnd(1,100) >= 96) {",
                        "                                    tdwd1 = BuyBigWarrior(StarPlanets(GalaxyStar(i),j));",
                        "                                    ShipImproveItems(tdwd1,5);",
                        "                                    FixOverweight(tdwd1);",
                        "                                    ShipFreeExp(tdwd1,19000);",
                        "                                }",
                        "                            }",
                        "                        }",
                        "                    }",
                        "                }",
                        "            }",
                        "            if(SUCYA <= 1) {",
                        "                if(SUCYA - SUCRN >= 2) {",
                        "                    AddPlanetNews(CT('AdditionalNews.MobilizationEvents.En_garde1'),80);",
                        "                    for(i=0;GalaxyStars()>i;i=i+1) {",
                        "                        if(StarOwner(GalaxyStar(i)) == 0) {",
                        "                            for(j=0;StarPlanets(GalaxyStar(i))>j;j=j+1) {",
                        "                                if(PlanetOwner(StarPlanets(GalaxyStar(i),j)) < 5) {",
                        "                                    tdwd1 = BuyWarrior(StarPlanets(GalaxyStar(i),j));",
                        "                                    ShipImproveItems(tdwd1,3);",
                        "                                    FixOverweight(tdwd1);",
                        "                                    ShipFreeExp(tdwd1,12000);",
                        "                                    if(Rnd(1,100) >= 96) {",
                        "                                        tdwd1 = BuyBigWarrior(StarPlanets(GalaxyStar(i),j));",
                        "                                        ShipImproveItems(tdwd1,5);",
                        "                                        FixOverweight(tdwd1);",
                        "                                        ShipFreeExp(tdwd1,19000);",
                        "                                    }",
                        "                                }",
                        "                            }",
                        "                        }",
                        "                    }",
                        "                }",
                        "            }",
                        "        }",
                        "    }",
                        "}",
                        "SUCYA = SUCRN;"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 240,
                    "Pos.y": 800,
                    "Parent": -1,
                    "#": 102,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(ShipInPrison(Player()) && InPris == 0) {",
                        "    CT('InprisonmentNews',InprisonmentArr);",
                        "    AddPlanetNews(Format(InprisonmentArr[Rnd(0,(ArrayDim(InprisonmentArr)-1))],'FullName',Name(Player()),'Planet',Name(GetShipPlanet(Player())),'Month',round(ShipInPrison(Player()) / 30),'Star',Name(ShipStar(Player()))),76);",
                        "    InPris = 1;",
                        "}",
                        "if(!ShipInPrison(Player()) && InPris == 1) InPris = 0;"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 540,
                    "Pos.y": 800,
                    "Parent": -1,
                    "#": 104,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Награждаем всяких рейнджеров с новостью, а ещё игроку не забываем пи... Ой, то есть спасибо сказать",
                        "if(RangersMedalsCD == 0) {",
                        "    RangersMedalsCD = Rnd(80,120);",
                        "",
                        "    GlobalChance = 0;",
                        "",
                        "    //Ищем рейнджеров, выбрасывая исключённых из рейтинга изменников и прочих чертил, например, игрока на стороне Клана, ибо кто ему тогда даст медальку?",
                        "    for(i=0;GalaxyRangers()>i;i=i+1) {",
                        "        dword tranger = GalaxyRangers(i);",
                        "        int tchance,tchance2 = 0;",
                        "        RangersArr = newarray(1);",
                        "        ChanceArr = newarray(1);",
                        "",
                        "        if(RangerExcludedFromRating(tranger)) continue;",
                        "        if(ShipStatistic(tranger,2) < 70 || ShipStatistic(tranger,1) < 120) continue;",
                        "        if(ShipStatistic(tranger,3) < 1) continue;",
                        "",
                        "        //Считаем шанс рейнджера быть награждённым",
                        "        tchance = ShipStatistic(tranger,1) + ShipStatistic(tranger,2) * 2 + ShipStatistic(tranger,3) * 15;",
                        "        GlobalChance = GlobalChance + tchance;",
                        "",
                        "        ArrayAdd(RangersArr,tranger);",
                        "        ArrayAdd(ChanceArr,tchance);",
                        "    }",
                        "",
                        "    //А то мало ли - вдруг никого ещё такого крутого нету",
                        "    if(GlobalChance > 0) {",
                        "        ForRnd = Rnd(1,GlobalChance);",
                        "        //А теперь смотрим, на кого указало",
                        "        for(i=0;ArrayDim(RangersArr)>i;i=i+1) {",
                        "            str tstr;",
                        "",
                        "            tchance2 = tchance2 + ChanceArr[i];",
                        "            if(ForRnd > tchance2) continue;",
                        "            else {",
                        "                //Выбираем, что дадим герою",
                        "                ForRandom = Rnd(1,14);",
                        "                if(ForRandom == 1) {",
                        "                    GiveRewardByNom(RangersArr[i],8);",
                        "                    tstr = 'Ивикус';",
                        "                }",
                        "                if(ForRandom == 2) {",
                        "                    GiveRewardByNom(RangersArr[i],6);",
                        "                    tstr = 'Медаль Конгресса';",
                        "                }",
                        "                if(ForRandom == 3) {",
                        "                    GiveRewardByNom(RangersArr[i],3);",
                        "                    tstr = 'Табель Воина';",
                        "                }",
                        "                if(ForRandom == 4) {",
                        "                    GiveRewardByNom(RangersArr[i],22);",
                        "                    tstr = 'Урановый Млеко';",
                        "                }",
                        "                if(ForRandom == 5) {",
                        "                    GiveRewardByNom(RangersArr[i],21);",
                        "                    tstr = 'Большой Англум';",
                        "                }",
                        "                if(ForRandom == 6) {",
                        "                    GiveRewardByNom(RangersArr[i],20);",
                        "                    tstr = 'Ашианская Лента';",
                        "                }",
                        "                if(ForRandom == 7) {",
                        "                    GiveRewardByNom(RangersArr[i],2);",
                        "                    tstr = 'Убойный Удар';",
                        "                }",
                        "                if(ForRandom == 8) {",
                        "                    GiveRewardByNom(RangersArr[i],19);",
                        "                    tstr = 'Тройной Ореон';",
                        "                }",
                        "                if(ForRandom == 9) {",
                        "                    GiveRewardByNom(RangersArr[i],18);",
                        "                    tstr = 'Золотая Звезда Героя';",
                        "                }",
                        "                if(ForRandom == 10) {",
                        "                    GiveRewardByNom(RangersArr[i],14);",
                        "                    tstr = 'Гвардейский Вымпел';",
                        "                }",
                        "                if(ForRandom == 11) {",
                        "                    GiveRewardByNom(RangersArr[i],13);",
                        "                    tstr = 'Орден Достоинства';",
                        "                }",
                        "                if(ForRandom == 12) {",
                        "                    GiveRewardByNom(RangersArr[i],12);",
                        "                    tstr = 'Медаль Канвен-ивирис';",
                        "                }",
                        "                if(ForRandom == 13) {",
                        "                    GiveRewardByNom(RangersArr[i],11);",
                        "                    tstr = 'Малый Англум';",
                        "                }",
                        "                if(ForRandom == 14) {",
                        "                    GiveRewardByNom(RangersArr[i],1);",
                        "                    tstr = 'Калкитовый Наконечник';",
                        "                }",
                        "                CT('AdditionalNews.MedalNews',MedalArr);",
                        "                tstr = Format(MedalArr[Rnd(1,3)],'#name#',ShortName(tranger),'#medal#',tstr);",
                        "                AddPlanetNews(tstr,77);",
                        "                if(Player() == RangersArr[i]) {",
                        "                    NewsAdd(tstr);",
                        "                    Sound('Sound.NewMsg');",
                        "                }",
                        "            }",
                        "        }",
                        "    }",
                        "}",
                        "if(RangersMedalsCD != 0) RangersMedalsCD = RangersMedalsCD - 1;"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 820,
                    "Pos.y": 240,
                    "Parent": -1,
                    "#": 117,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//События спавна крутого шмота",
                        "if(EqCD) EqCD = EqCD - 1;",
                        "else {",
                        "    int hhh = 0;",
                        "    if(Rnd(1,5) == 5) {",
                        "        InvPlan = FindPlanetByAdvancement(Rnd(10,30));",
                        "        hhh = 1;",
                        "    }",
                        "    else {",
                        "        InvPlan = FindPlanetByAdvancement(Rnd(80,100));",
                        "    }",
                        "",
                        "    unknown terra = newarray(1);",
                        "    ArrayDelete(terra,0);",
                        "    unknown venus = newarray(1);",
                        "    ArrayDelete(venus,0);",
                        "",
                        "    for(i=1;i<19;i=i+1) {",
                        "        ArrayAdd(terra,PlanetInventionLevel(InvPlan,i));",
                        "        ArrayAdd(venus,i);",
                        "    }",
                        "",
                        "    ArraySort(terra,venus);",
                        "",
                        "    if(!hhh) equip = CreateEquipment(42+venus[ArrayDim(venus)-1],Rnd(30,50),PlanetInventionLevel(InvPlan,venus[ArrayDim(venus)-1]),PlanetOwner(InvPlan));",
                        "    else equip = CreateEquipment(42+venus[ArrayDim(venus)-1],Rnd(30,50),GalaxyTechLevel(),PlanetOwner(InvPlan));",
                        "    ItemImprovement(equip,3);",
                        "",
                        "    AddItemToShop(InvPlan,equip);",
                        "",
                        "    //Повышаем стоимость шмотки, т.к. она уникальная",
                        "    ItemCost(equip,ItemCost(equip)*3);",
                        "",
                        "    if(hhh) {",
                        "        PlanetInventionLevel(InvPlan,venus[ArrayDim(venus)-1],min(PlanetInventionLevel(InvPlan,venus[ArrayDim(venus)-1])+1,8));",
                        "        AddPlanetNews(Format(CT('AdditionalNews.EquipCreateNews.Stupid'+Rnd(1,CT('AdditionalNews.EquipCreateNews.StupidCount'))),'plane',Name(InvPlan),'eqy',Name(equip)),84);",
                        "        EqCD = Rnd(60,100);",
                        "    }",
                        "    else {",
                        "        AddPlanetNews(Format(CT('AdditionalNews.EquipCreateNews.Clever'+Rnd(1,CT('AdditionalNews.EquipCreateNews.CleverCount'))),'plane',Name(InvPlan),'eqy',Name(equip),'level',ItemLevel(equip)),84);",
                        "        EqCD = Rnd(40,70);",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 820,
                    "Pos.y": 380,
                    "Parent": -1,
                    "#": 122,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "for(i=0;GalaxySectors()>i;i=i+1) {",
                        "    StarChoosed = GalaxySectors(i);",
                        "",
                        "    l = 0;",
                        "    int f = ConStars(StarChoosed);",
                        "    int tint = SectorsArray[i];",
                        "    //SFT('RefNews logging sector: name is '+Name(StarChoosed));",
                        "    //SFT('RefNews logging sector: stars count is '+ConStars(StarChoosed));",
                        "    if(!tint) {",
                        "        for(j=0;f>j;j=j+1) {",
                        "            StarChoosed1 = ConStar(StarChoosed,j);",
                        "            //if(StarChoosed1 < 1) continue;",
                        "",
                        "            //SFT('RefNews logging star number '+j+': name is '+Name(StarChoosed1));",
                        "            //SFT('RefNews logging i is '+i);",
                        "            //SFT('RefNews logging tint is '+tint);",
                        "            if(StarOwner(StarChoosed1) || StarCustomFaction(StarChoosed1) != '') {",
                        "                SectorsArray[i] = 1;",
                        "                break;",
                        "            }",
                        "            else l = l + 1;",
                        "        }",
                        "    }",
                        "    else {",
                        "        for(j=0;f>j;j=j+1) {",
                        "            StarChoosed1 = ConStar(StarChoosed,j);",
                        "",
                        "            if(StarOwner(StarChoosed1) || StarCustomFaction(StarChoosed1) != '') break;",
                        "            else l = l + 1;",
                        "        }",
                        "",
                        "        if(l == f) {",
                        "            SectorsArray[i] = 0;",
                        "            tstr = CT('AdditionalNews.SectorLiberationNews.'+Rnd(1,CT('AdditionalNews.SectorLiberationNews.Count')));",
                        "            tstr = Format(tstr,'sect',Name(StarChoosed));",
                        "            AddPlanetNews(tstr,96);",
                        "            NewsAdd(tstr);",
                        "            Sound('Sound.NewMsg');",
                        "        }",
                        "    }",
                        "}"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 1290,
                    "Pos.y": 180,
                    "Parent": -1,
                    "#": 126,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "//Блок для поиска лучшего воина",
                        "if(BestWarrior == 0) i = 0;",
                        "else if(IdToShip(BestWarrior) < 1) i = 0;",
                        "else if(!RangerStatus(IdToShip(BestWarrior),'EminentWarrior')) i = 0;",
                        "else i = 1;",
                        "",
                        "if(i) {",
                        "}",
                        "else {",
                        "    BestWarrior = 0;",
                        "    dword cur_ship = 0;",
                        "",
                        "    for(i=0;GalaxyRangers()>i;i=i+1) {",
                        "        cur_ship = GalaxyRangers(i);",
                        "        if(!RangerStatus(cur_ship,'EminentWarrior')) continue;",
                        "        else {",
                        "            BestWarrior = Id(cur_ship);",
                        "            ShipAddCustomShipInfo(cur_ship,'EminentWarriorNews','NoShow');",
                        "        }",
                        "    }",
                        "}",
                        "",
                        "//Таймер, чтобы не спамило новостями об таких воюнах",
                        "if(NewsCD) NewsCD = NewsCD - 1;"
                    ]
                },
                {
                    "Type": "Top",
                    "Name": "",
                    "Pos.x": 820,
                    "Pos.y": 430,
                    "Parent": -1,
                    "#": 129,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "if(!GreatVictory) {",
                        "    if(ControlledSystems(0) == GalaxyStars()) {",
                        "        GreatVictory = 1;",
                        "        tstr = CT('AdditionalNews.GreatVictoryCelebration');",
                        "        if(!CurrentMods('ShusRangers\\ShuKlissan')) NewsAdd(tstr);",
                        "        else CustomEther('GalaxyAlert', 7, '',tstr);",
                        "        AddPlanetNews(tstr,81);",
                        "        Sound('Sound.NewMsg');",
                        "    }",
                        "}"
                    ]
                }
            ],
            "Planets": 
            [
                {
                    "Type": "TPlanet",
                    "Name": "InitPlanet",
                    "Pos.x": 100,
                    "Pos.y": 180,
                    "Parent": -1,
                    "#": 1,
                    "Race": 62,
                    "Owner": 62,
                    "Economy": 14,
                    "Goverment": 62,
                    "RangeMin": 0,
                    "RangeMax": 100,
                    "Dialog": -1
                }
            ],
            "Ships": 
            [
                {
                    "Type": "TStarShip",
                    "Name": "",
                    "Pos.x": 100,
                    "Pos.y": 120,
                    "Parent": -1,
                    "#": 3,
                    "Count": 1,
                    "Owner": 62,
                    "Ship.Type": 126,
                    "Player": true,
                    "SpeedMin": 0,
                    "SpeedMax": 10000,
                    "Weapon": 0,
                    "CargoHook": 0,
                    "EmptySpace": 0,
                    "StatusTraderMin": 0,
                    "StatusTraderMax": 100,
                    "StatusWarriorMin": 0,
                    "StatusWarriorMax": 100,
                    "StatusPirateMin": 0,
                    "StatusPirateMax": 100,
                    "StrengthMin": "0",
                    "StrengthMax": "0",
                    "Ruins": ""
                }
            ],
            "Stars": 
            [
                {
                    "Type": "TStar",
                    "Name": "InitStar",
                    "Pos.x": 100,
                    "Pos.y": 150,
                    "Parent": -1,
                    "#": 0,
                    "Constellation": 0,
                    "Priority": 0,
                    "NoKling": false,
                    "NoComeKling": false
                }
            ],
            "Statements": 
            [
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 240,
                    "Pos.y": 120,
                    "Parent": -1,
                    "#": 26,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ControlledSystems(0) > 0"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 240,
                    "Pos.y": 260,
                    "Parent": -1,
                    "#": 69,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ControlledSystems(0) > 0"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 240,
                    "Pos.y": 470,
                    "Parent": -1,
                    "#": 70,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ControlledSystems(0) > 0"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 540,
                    "Pos.y": 710,
                    "Parent": -1,
                    "#": 71,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ControlledSystems(0) > 0"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 800,
                    "Pos.y": 710,
                    "Parent": -1,
                    "#": 72,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ControlledSystems(0) > 0"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 800,
                    "Pos.y": 560,
                    "Parent": -1,
                    "#": 77,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "CurTurn() % 365 == 0"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 1080,
                    "Pos.y": 710,
                    "Parent": -1,
                    "#": 96,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ControlledSystems(0) > 0"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 980,
                    "Pos.y": 710,
                    "Parent": -1,
                    "#": 97,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "CurTurn() > 300"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 1030,
                    "Pos.y": 710,
                    "Parent": -1,
                    "#": 98,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "CurTurn() % 365 == 0"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 820,
                    "Pos.y": 190,
                    "Parent": -1,
                    "#": 116,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "ControlledSystems(0)+ControlledSystems(2)>2"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 820,
                    "Pos.y": 340,
                    "Parent": -1,
                    "#": 121,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "!CoalitionDefeated()"
                    ]
                },
                {
                    "Type": "Tif",
                    "Name": "",
                    "Pos.x": 820,
                    "Pos.y": 300,
                    "Parent": -1,
                    "#": 125,
                    "Code.Type": "Turn",
                    "Code": 
                    [
                        "StartSectorNews"
                    ]
                }
            ],
            "States": 
            [
                {
                    "Type": "TState",
                    "Name": "PlayerState",
                    "Pos.x": 100,
                    "Pos.y": 240,
                    "Parent": -1,
                    "#": 2,
                    "Move": 0,
                    "MoveObj": -1,
                    "Attack.Count": 0,
                    "TakeItem": -1,
                    "TakeAllItem": false,
                    "OnTalk": "",
                    "OnActCode": "",
                    "EType": 1,
                    "EUnique": "",
                    "EMsg": ""
                }
            ],
            "Variables": 
            [
                {
                    "Type": "TVar",
                    "Name": "timer",
                    "Pos.x": 300,
                    "Pos.y": 60,
                    "Parent": -1,
                    "#": 6,
                    "Var.Type": "Array",
                    "Init": "120",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "ForRandom",
                    "Pos.x": 300,
                    "Pos.y": 80,
                    "Parent": -1,
                    "#": 8,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "TryAgain",
                    "Pos.x": 300,
                    "Pos.y": 100,
                    "Parent": -1,
                    "#": 9,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "NewsTimer",
                    "Pos.x": 300,
                    "Pos.y": 120,
                    "Parent": -1,
                    "#": 10,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "blacklist",
                    "Pos.x": 300,
                    "Pos.y": 160,
                    "Parent": -1,
                    "#": 11,
                    "Var.Type": "Array",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "EconomicalNewsTimer",
                    "Pos.x": 300,
                    "Pos.y": 180,
                    "Parent": -1,
                    "#": 13,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "j",
                    "Pos.x": 380,
                    "Pos.y": 60,
                    "Parent": -1,
                    "#": 14,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "cur_star",
                    "Pos.x": 430,
                    "Pos.y": 60,
                    "Parent": -1,
                    "#": 15,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "cur_planet",
                    "Pos.x": 430,
                    "Pos.y": 80,
                    "Parent": -1,
                    "#": 16,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "StarChoosed",
                    "Pos.x": 430,
                    "Pos.y": 100,
                    "Parent": -1,
                    "#": 17,
                    "Var.Type": "Dword",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "StarChoosed1",
                    "Pos.x": 430,
                    "Pos.y": 120,
                    "Parent": -1,
                    "#": 18,
                    "Var.Type": "Dword",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "PlanetChoosed",
                    "Pos.x": 430,
                    "Pos.y": 140,
                    "Parent": -1,
                    "#": 19,
                    "Var.Type": "Dword",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "PlanetChoosed1",
                    "Pos.x": 430,
                    "Pos.y": 160,
                    "Parent": -1,
                    "#": 20,
                    "Var.Type": "Dword",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "PlanetChoosed2",
                    "Pos.x": 430,
                    "Pos.y": 180,
                    "Parent": -1,
                    "#": 21,
                    "Var.Type": "Dword",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "TryAgainPlanets",
                    "Pos.x": 300,
                    "Pos.y": 200,
                    "Parent": -1,
                    "#": 22,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "NakopitStar",
                    "Pos.x": 300,
                    "Pos.y": 220,
                    "Parent": -1,
                    "#": 23,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "i",
                    "Pos.x": 380,
                    "Pos.y": 80,
                    "Parent": -1,
                    "#": 24,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "c",
                    "Pos.x": 380,
                    "Pos.y": 100,
                    "Parent": -1,
                    "#": 25,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "date",
                    "Pos.x": 580,
                    "Pos.y": 680,
                    "Parent": -1,
                    "#": 31,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "ForRandomCount",
                    "Pos.x": 430,
                    "Pos.y": 200,
                    "Parent": -1,
                    "#": 33,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "ForCombo1",
                    "Pos.x": 840,
                    "Pos.y": 680,
                    "Parent": -1,
                    "#": 34,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "NumberOfCombo",
                    "Pos.x": 840,
                    "Pos.y": 660,
                    "Parent": -1,
                    "#": 35,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "Number",
                    "Pos.x": 840,
                    "Pos.y": 640,
                    "Parent": -1,
                    "#": 36,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "ForRandomCount2",
                    "Pos.x": 840,
                    "Pos.y": 620,
                    "Parent": -1,
                    "#": 37,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "LastPlanet",
                    "Pos.x": 290,
                    "Pos.y": 500,
                    "Parent": -1,
                    "#": 38,
                    "Var.Type": "Dword",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "choosed_planet",
                    "Pos.x": 290,
                    "Pos.y": 520,
                    "Parent": -1,
                    "#": 39,
                    "Var.Type": "Dword",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "choosed_star",
                    "Pos.x": 290,
                    "Pos.y": 540,
                    "Parent": -1,
                    "#": 40,
                    "Var.Type": "Dword",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "StartConsillium",
                    "Pos.x": 290,
                    "Pos.y": 560,
                    "Parent": -1,
                    "#": 41,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "ConsilliumTaimer",
                    "Pos.x": 480,
                    "Pos.y": 480,
                    "Parent": -1,
                    "#": 42,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "FreeSystems",
                    "Pos.x": 480,
                    "Pos.y": 500,
                    "Parent": -1,
                    "#": 43,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "WaitingForConsilium",
                    "Pos.x": 480,
                    "Pos.y": 520,
                    "Parent": -1,
                    "#": 44,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "InvestitionsBuff",
                    "Pos.x": 480,
                    "Pos.y": 540,
                    "Parent": -1,
                    "#": 45,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "WarTimer",
                    "Pos.x": 300,
                    "Pos.y": 300,
                    "Parent": -1,
                    "#": 46,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "WarStarted",
                    "Pos.x": 300,
                    "Pos.y": 320,
                    "Parent": -1,
                    "#": 47,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "WarPlanet",
                    "Pos.x": 300,
                    "Pos.y": 340,
                    "Parent": -1,
                    "#": 48,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "WarGoing",
                    "Pos.x": 450,
                    "Pos.y": 300,
                    "Parent": -1,
                    "#": 49,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "WarStages",
                    "Pos.x": 450,
                    "Pos.y": 320,
                    "Parent": -1,
                    "#": 50,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "BattlesOnStage1",
                    "Pos.x": 590,
                    "Pos.y": 310,
                    "Parent": -1,
                    "#": 51,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "BattlesOnStage2",
                    "Pos.x": 590,
                    "Pos.y": 330,
                    "Parent": -1,
                    "#": 52,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "FromLastNews",
                    "Pos.x": 300,
                    "Pos.y": 360,
                    "Parent": -1,
                    "#": 53,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "PeopleSupport",
                    "Pos.x": 300,
                    "Pos.y": 380,
                    "Parent": -1,
                    "#": 54,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "SU",
                    "Pos.x": 300,
                    "Pos.y": 400,
                    "Parent": -1,
                    "#": 55,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "UntilNextWar",
                    "Pos.x": 450,
                    "Pos.y": 340,
                    "Parent": -1,
                    "#": 56,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "BombingEvent",
                    "Pos.x": 450,
                    "Pos.y": 360,
                    "Parent": -1,
                    "#": 57,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "l",
                    "Pos.x": 360,
                    "Pos.y": 400,
                    "Parent": -1,
                    "#": 58,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "InterventionStarted",
                    "Pos.x": 450,
                    "Pos.y": 380,
                    "Parent": -1,
                    "#": 59,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "SupportVar",
                    "Pos.x": 450,
                    "Pos.y": 400,
                    "Parent": -1,
                    "#": 60,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "SUCYA",
                    "Pos.x": 580,
                    "Pos.y": 660,
                    "Parent": -1,
                    "#": 61,
                    "Var.Type": "Int",
                    "Init": "100",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "SUCRN",
                    "Pos.x": 580,
                    "Pos.y": 640,
                    "Parent": -1,
                    "#": 62,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "VPKpart",
                    "Pos.x": 640,
                    "Pos.y": 680,
                    "Parent": -1,
                    "#": 63,
                    "Var.Type": "Str",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "WhatsNow",
                    "Pos.x": 580,
                    "Pos.y": 620,
                    "Parent": -1,
                    "#": 64,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "Creditspart",
                    "Pos.x": 640,
                    "Pos.y": 660,
                    "Parent": -1,
                    "#": 65,
                    "Var.Type": "Str",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "Minfinpart",
                    "Pos.x": 640,
                    "Pos.y": 640,
                    "Parent": -1,
                    "#": 66,
                    "Var.Type": "Str",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "AllSystems",
                    "Pos.x": 580,
                    "Pos.y": 600,
                    "Parent": -1,
                    "#": 67,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "SUPRN",
                    "Pos.x": 660,
                    "Pos.y": 620,
                    "Parent": -1,
                    "#": 68,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "LocalRND",
                    "Pos.x": 660,
                    "Pos.y": 600,
                    "Parent": -1,
                    "#": 73,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "PlanetForConsilliumID",
                    "Pos.x": 480,
                    "Pos.y": 560,
                    "Parent": -1,
                    "#": 74,
                    "Var.Type": "Dword",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "WarPlanetID",
                    "Pos.x": 300,
                    "Pos.y": 280,
                    "Parent": -1,
                    "#": 75,
                    "Var.Type": "Dword",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "ForRnd",
                    "Pos.x": 590,
                    "Pos.y": 140,
                    "Parent": -1,
                    "#": 76,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "FlagDomDef",
                    "Pos.x": 1310,
                    "Pos.y": 560,
                    "Parent": -1,
                    "#": 81,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "FlagNoDoms",
                    "Pos.x": 1130,
                    "Pos.y": 560,
                    "Parent": -1,
                    "#": 82,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "DomiksVictoryDate",
                    "Pos.x": 1130,
                    "Pos.y": 590,
                    "Parent": -1,
                    "#": 83,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "FlagNoPirates",
                    "Pos.x": 1130,
                    "Pos.y": 620,
                    "Parent": -1,
                    "#": 84,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "ClanDeathDate",
                    "Pos.x": 1130,
                    "Pos.y": 650,
                    "Parent": -1,
                    "#": 85,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "CoalDeathDate",
                    "Pos.x": 1310,
                    "Pos.y": 650,
                    "Parent": -1,
                    "#": 86,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "FlagNoCoal",
                    "Pos.x": 1310,
                    "Pos.y": 590,
                    "Parent": -1,
                    "#": 87,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "FlagPiratesDef",
                    "Pos.x": 1310,
                    "Pos.y": 620,
                    "Parent": -1,
                    "#": 88,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "RevoltCD",
                    "Pos.x": 1340,
                    "Pos.y": 260,
                    "Parent": -1,
                    "#": 89,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "LastPlanet1",
                    "Pos.x": 1340,
                    "Pos.y": 290,
                    "Parent": -1,
                    "#": 90,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "PlanetForRevoltID",
                    "Pos.x": 1340,
                    "Pos.y": 320,
                    "Parent": -1,
                    "#": 91,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "choosed_planet1",
                    "Pos.x": 1340,
                    "Pos.y": 350,
                    "Parent": -1,
                    "#": 92,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "choosed_star1",
                    "Pos.x": 1340,
                    "Pos.y": 380,
                    "Parent": -1,
                    "#": 93,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "StartRevolt",
                    "Pos.x": 1510,
                    "Pos.y": 260,
                    "Parent": -1,
                    "#": 94,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "temp_cd",
                    "Pos.x": 1510,
                    "Pos.y": 290,
                    "Parent": -1,
                    "#": 99,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "Angry",
                    "Pos.x": 1510,
                    "Pos.y": 320,
                    "Parent": -1,
                    "#": 100,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "TimeSpent",
                    "Pos.x": 1510,
                    "Pos.y": 350,
                    "Parent": -1,
                    "#": 101,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "InprisonmentArr",
                    "Pos.x": 250,
                    "Pos.y": 850,
                    "Parent": -1,
                    "#": 103,
                    "Var.Type": "Unknown",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "RangersArr",
                    "Pos.x": 540,
                    "Pos.y": 850,
                    "Parent": -1,
                    "#": 105,
                    "Var.Type": "Unknown",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "ChanceArr",
                    "Pos.x": 540,
                    "Pos.y": 880,
                    "Parent": -1,
                    "#": 106,
                    "Var.Type": "Unknown",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "GlobalChance",
                    "Pos.x": 540,
                    "Pos.y": 910,
                    "Parent": -1,
                    "#": 107,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "MedalArr",
                    "Pos.x": 540,
                    "Pos.y": 940,
                    "Parent": -1,
                    "#": 108,
                    "Var.Type": "Unknown",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "RangersMedalsCD",
                    "Pos.x": 670,
                    "Pos.y": 850,
                    "Parent": -1,
                    "#": 109,
                    "Var.Type": "Int",
                    "Init": "40",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "InPris",
                    "Pos.x": 250,
                    "Pos.y": 880,
                    "Parent": -1,
                    "#": 110,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "nope",
                    "Pos.x": 430,
                    "Pos.y": 220,
                    "Parent": -1,
                    "#": 111,
                    "Var.Type": "Int",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "tstr",
                    "Pos.x": 320,
                    "Pos.y": 670,
                    "Parent": -1,
                    "#": 112,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "BertorsKilled",
                    "Pos.x": 320,
                    "Pos.y": 700,
                    "Parent": -1,
                    "#": 113,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "KillsCD",
                    "Pos.x": 320,
                    "Pos.y": 730,
                    "Parent": -1,
                    "#": 114,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "TitleCD",
                    "Pos.x": 320,
                    "Pos.y": 760,
                    "Parent": -1,
                    "#": 115,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "EqCD",
                    "Pos.x": 880,
                    "Pos.y": 180,
                    "Parent": -1,
                    "#": 118,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "InvPlan",
                    "Pos.x": 880,
                    "Pos.y": 210,
                    "Parent": -1,
                    "#": 119,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "equip",
                    "Pos.x": 880,
                    "Pos.y": 240,
                    "Parent": -1,
                    "#": 120,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "StartSectorNews",
                    "Pos.x": 880,
                    "Pos.y": 340,
                    "Parent": -1,
                    "#": 123,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "SectorsArray",
                    "Pos.x": 880,
                    "Pos.y": 370,
                    "Parent": -1,
                    "#": 124,
                    "Var.Type": "Array",
                    "Init": "20",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "NewsCD",
                    "Pos.x": 1340,
                    "Pos.y": 160,
                    "Parent": -1,
                    "#": 127,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "Liberator",
                    "Pos.x": 440,
                    "Pos.y": 670,
                    "Parent": -1,
                    "#": 128,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "GreatVictory",
                    "Pos.x": 880,
                    "Pos.y": 430,
                    "Parent": -1,
                    "#": 130,
                    "Var.Type": "Int",
                    "Init": "0",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "BestWarrior",
                    "Pos.x": 1340,
                    "Pos.y": 180,
                    "Parent": -1,
                    "#": 131,
                    "Var.Type": "Dword",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "timerNew",
                    "Pos.x": 590,
                    "Pos.y": 90,
                    "Parent": -1,
                    "#": 132,
                    "Var.Type": "Unknown",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "blacklistNew",
                    "Pos.x": 590,
                    "Pos.y": 70,
                    "Parent": -1,
                    "#": 133,
                    "Var.Type": "Unknown",
                    "Init": "",
                    "Global": false
                },
                {
                    "Type": "TVar",
                    "Name": "Version",
                    "Pos.x": 590,
                    "Pos.y": 180,
                    "Parent": -1,
                    "#": 134,
                    "Var.Type": "Str",
                    "Init": "",
                    "Global": false
                }
            ]
        }
    ],
    "Visual.Links": 
    [
        {
            "Type": "TGraphLink",
            "Begin": 3,
            "End": 0,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 1,
            "End": 0,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 4,
            "End": 2,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 4,
            "End": 1,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 26,
            "End": 5,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 69,
            "End": 27,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 70,
            "End": 28,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 71,
            "End": 30,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 72,
            "End": 32,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 96,
            "End": 95,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 98,
            "End": 96,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 97,
            "End": 98,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 77,
            "End": 78,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 71,
            "End": 104,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 116,
            "End": 117,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 121,
            "End": 122,
            "Nom": 0,
            "Arrow": true
        },
        {
            "Type": "TGraphLink",
            "Begin": 125,
            "End": 121,
            "Nom": 0,
            "Arrow": true
        }
    ],
    "BlockPar.EC.Total.Strings": 32,
    "BlockPar.EC": 
    [
        {
            "#": "0",
            "String": "Тайкон-холл"
        },
        {
            "#": "1",
            "String": "ГУМ"
        },
        {
            "#": "10",
            "String": "Искра"
        },
        {
            "#": "11",
            "String": "Энергия"
        },
        {
            "#": "12",
            "String": "Маяк"
        },
        {
            "#": "13",
            "String": "Шелесто"
        },
        {
            "#": "14",
            "String": "Анабакко"
        },
        {
            "#": "15",
            "String": "Лигари"
        },
        {
            "#": "16",
            "String": "Венеччо"
        },
        {
            "#": "17",
            "String": "Алленто"
        },
        {
            "#": "18",
            "String": "Фонсторт"
        },
        {
            "#": "19",
            "String": "Ветрум"
        },
        {
            "#": "2",
            "String": "Холодная Кинза"
        },
        {
            "#": "20",
            "String": "Мезинно"
        },
        {
            "#": "21",
            "String": "Лайстар"
        },
        {
            "#": "22",
            "String": "Азириум"
        },
        {
            "#": "23",
            "String": "Яссиф Юразельски"
        },
        {
            "#": "24",
            "String": "Лазарре Каган"
        },
        {
            "#": "25",
            "String": "Серго Кир"
        },
        {
            "#": "26",
            "String": "Вальдемар Аль-Лени"
        },
        {
            "#": "27",
            "String": "Феникс Держинский"
        },
        {
            "#": "28",
            "String": "Айзиф Желязны"
        },
        {
            "#": "29",
            "String": "«Солнце», «Пробил час», «Стальные воины», «Я жду»"
        },
        {
            "#": "3",
            "String": "Грибожуева"
        },
        {
            "#": "30",
            "String": "«Иное неважно», «Аль-Дагор», «Смута», «Алая лилия»"
        },
        {
            "#": "31",
            "String": "«Цуфай», «Операция Коалиционная сила», «Песнь радиоактивной пустыни», «Гралгарский бой»"
        },
        {
            "#": "4",
            "String": "Громина"
        },
        {
            "#": "5",
            "String": "Кисельродде"
        },
        {
            "#": "6",
            "String": "Молоточкина"
        },
        {
            "#": "7",
            "String": "Литвинова"
        },
        {
            "#": "8",
            "String": "3294"
        },
        {
            "#": "9",
            "String": "Вестник"
        }
    ]
}